{"version":3,"file":"ngx-formly-core-select.umd.js.map","sources":["ng://@ngx-formly/core/select/select-options.pipe.ts","ng://@ngx-formly/core/select/select.module.ts"],"sourcesContent":["import { Pipe, PipeTransform } from '@angular/core';\nimport { Observable, of as observableOf } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { FormlyFieldConfig } from '@ngx-formly/core';\n\n@Pipe({ name: 'formlySelectOptions' })\nexport class FormlySelectOptionsPipe implements PipeTransform {\n  transform(options, field?: FormlyFieldConfig) {\n    if (!(options instanceof Observable)) {\n      options = observableOf(options);\n    }\n\n    return (options as Observable<any>).pipe(\n      map(value => this.toOptions(value, field || {})),\n    );\n  }\n\n  private toOptions(options, field: FormlyFieldConfig) {\n    const gOptions: any[] = [],\n      groups: { [key: string]: any[] } = {},\n      to = field.templateOptions || {};\n\n    options.map((option: any) => {\n      if (!this.getGroupProp(option, to)) {\n        gOptions.push(this.toOption(option, to));\n      } else {\n        if (!groups[this.getGroupProp(option, to)]) {\n          groups[this.getGroupProp(option, to)] = [];\n          gOptions.push({\n            label: this.getGroupProp(option, to),\n            group: groups[this.getGroupProp(option, to)],\n          });\n        }\n        groups[this.getGroupProp(option, to)].push(this.toOption(option, to));\n      }\n    });\n\n    return gOptions;\n  }\n\n  private toOption(item, to) {\n    return {\n      label: this.getLabelProp(item, to),\n      value: this.getValueProp(item, to),\n    };\n  }\n\n  private getLabelProp(item, to): string {\n    if (typeof to.labelProp === 'function') {\n      return to.labelProp(item);\n    }\n\n    if (this.shouldUseLegacyOption(item, to)) {\n      return item.value;\n    }\n\n    return item[to.labelProp || 'label'];\n  }\n\n  private getValueProp(item, to): string {\n    if (typeof to.valueProp === 'function') {\n      return to.valueProp(item);\n    }\n\n    if (this.shouldUseLegacyOption(item, to)) {\n      return item.key;\n    }\n\n    return item[to.valueProp || 'value'];\n  }\n\n  private getGroupProp(item, to): string {\n    if (typeof to.groupProp === 'function') {\n      return to.groupProp(item);\n    }\n\n    return item[to.groupProp || 'group'];\n  }\n\n  private shouldUseLegacyOption(item, to) {\n    return !to.valueProp\n      && !to.labelProp\n      && item != null\n      && typeof item === 'object'\n      && 'key' in item\n      && 'value' in item;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { FormlySelectOptionsPipe } from './select-options.pipe';\n\n@NgModule({\n  declarations: [FormlySelectOptionsPipe],\n  exports: [FormlySelectOptionsPipe],\n})\nexport class FormlySelectModule { }\n"],"names":["Observable","observableOf","map","Pipe","NgModule"],"mappings":"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"}
